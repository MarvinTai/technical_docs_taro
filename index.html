<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Taro ‚Äî Technical Documentation</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
<style>
  :root {
    --mint: #5FCCB8;
    --mint-light: #e8f9f6;
    --mint-dark: #3aaa96;
    --beige: #F8F7F4;
    --beige-dark: #ede9e0;
    --ink: #1A1A1A;
    --ink-soft: #4a4a4a;
    --ink-muted: #8a8a8a;
    --white: #ffffff;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: 'DM Sans', sans-serif; background: var(--beige); color: var(--ink); overflow-x: hidden; }
  body::before { content: ''; position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E"); pointer-events: none; z-index: 1000; opacity: 0.4; }

  .hero { background: var(--ink); padding: 100px 80px 130px; position: relative; overflow: hidden; }
  .hero::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 80px; background: var(--beige); clip-path: ellipse(55% 100% at 50% 100%); }
  .hero-inner { max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1fr auto; gap: 60px; align-items: center; }
  .hero-eyebrow { font-size: 11px; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--mint); margin-bottom: 24px; display: flex; align-items: center; gap: 12px; }
  .hero-eyebrow::before { content: ''; width: 32px; height: 1px; background: var(--mint); }
  .hero-title { font-family: 'Playfair Display', serif; font-size: clamp(44px, 5vw, 68px); line-height: 1.1; color: var(--white); margin-bottom: 24px; }
  .hero-title span { color: var(--mint); font-style: italic; }
  .hero-desc { font-size: 17px; font-weight: 300; color: rgba(255,255,255,0.55); line-height: 1.75; max-width: 520px; border-left: 2px solid var(--mint); padding-left: 20px; margin-bottom: 48px; }
  .hero-pills { display: flex; flex-wrap: wrap; gap: 10px; }
  .pill { background: rgba(95,204,184,0.12); border: 1px solid rgba(95,204,184,0.3); color: var(--mint); font-size: 12px; font-weight: 500; padding: 8px 16px; border-radius: 100px; }
  .hero-turtle { font-size: 200px; filter: drop-shadow(0 20px 40px rgba(95,204,184,0.25)); animation: float 6s ease-in-out infinite; flex-shrink: 0; }
  @keyframes float { 0%,100%{transform:translateY(0) rotate(-2deg)} 50%{transform:translateY(-14px) rotate(2deg)} }

  .nav-band { background: var(--white); border-bottom: 1px solid var(--beige-dark); position: sticky; top: 0; z-index: 100; }
  .nav-inner { max-width: 1100px; margin: 0 auto; padding: 0 80px; display: flex; }
  .nav-link { font-size: 13px; font-weight: 500; color: var(--ink-muted); text-decoration: none; padding: 18px 24px; border-bottom: 2px solid transparent; transition: color 0.2s, border-color 0.2s; }
  .nav-link:hover, .nav-link.active { color: var(--mint-dark); border-bottom-color: var(--mint); }

  .section { padding: 100px 80px; max-width: 1100px; margin: 0 auto; scroll-margin-top: 60px; }
  .section-label { font-size: 11px; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--mint-dark); margin-bottom: 16px; display: flex; align-items: center; gap: 12px; }
  .section-label::after { content: ''; width: 48px; height: 1px; background: var(--mint); opacity: 0.5; }
  h2.section-title { font-family: 'Playfair Display', serif; font-size: clamp(34px,4vw,50px); line-height: 1.15; margin-bottom: 20px; color: var(--ink); }
  h2.section-title em { color: var(--mint-dark); font-style: italic; }
  .section-intro { font-size: 17px; font-weight: 300; line-height: 1.8; color: var(--ink-soft); max-width: 640px; margin-bottom: 56px; }
  h3.sub { font-size: 19px; font-weight: 600; color: var(--ink); margin-bottom: 16px; margin-top: 48px; display: flex; align-items: center; gap: 10px; }
  h3.sub::before { content: ''; width: 4px; height: 20px; background: var(--mint); border-radius: 2px; flex-shrink: 0; }
  p.body { font-size: 15px; font-weight: 300; line-height: 1.85; color: var(--ink-soft); margin-bottom: 16px; max-width: 720px; }

  .stack-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 20px; }
  .stack-card { background: var(--white); border-radius: 18px; padding: 32px 28px; border: 1px solid var(--beige-dark); transition: border-color 0.25s, transform 0.25s; }
  .stack-card:hover { border-color: var(--mint); transform: translateY(-3px); }
  .stack-label { font-size: 10px; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--mint-dark); margin-bottom: 18px; }
  .stack-items { display: flex; flex-direction: column; gap: 10px; }
  .stack-item { display: flex; align-items: center; gap: 10px; }
  .stack-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--mint); flex-shrink: 0; }
  .stack-name { font-size: 14px; font-weight: 500; color: var(--ink); }
  .stack-note { font-size: 12px; color: var(--ink-muted); margin-left: auto; }

  .why-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 8px; }
  .why-card { background: var(--white); border-radius: 18px; padding: 32px 28px; border: 1px solid var(--beige-dark); }
  .why-card h4 { font-size: 15px; font-weight: 600; color: var(--ink); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
  .why-card h4 span { font-size: 20px; }
  .why-card p { font-size: 14px; font-weight: 300; color: var(--ink-soft); line-height: 1.7; }

  .arch-section { background: var(--ink); padding: 100px 0; }
  .arch-inner { max-width: 1100px; margin: 0 auto; padding: 0 80px; }
  .arch-inner .section-label { color: var(--mint); }
  .arch-inner h2.section-title { color: var(--white); }
  .arch-inner h2.section-title em { color: var(--mint); }
  .arch-inner .section-intro { color: rgba(255,255,255,0.5); }
  .arch-inner h3.sub { color: var(--white); }
  .arch-inner p.body { color: rgba(255,255,255,0.55); }

  .flow-diagram { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 40px; margin: 32px 0; }
  .flow-label { font-size: 10px; font-weight: 600; letter-spacing: 0.15em; text-transform: uppercase; color: rgba(255,255,255,0.25); text-align: center; margin-bottom: 24px; }
  .flow-row { display: flex; align-items: center; gap: 0; flex-wrap: wrap; justify-content: center; }
  .flow-node { background: rgba(95,204,184,0.1); border: 1px solid rgba(95,204,184,0.25); border-radius: 12px; padding: 14px 20px; text-align: center; min-width: 110px; }
  .flow-node.dark { background: rgba(255,255,255,0.06); border-color: rgba(255,255,255,0.12); }
  .flow-node.highlight { background: rgba(95,204,184,0.2); border-color: var(--mint); }
  .flow-node-title { font-size: 12px; font-weight: 600; color: var(--mint); margin-bottom: 4px; }
  .flow-node.dark .flow-node-title { color: rgba(255,255,255,0.7); }
  .flow-node.highlight .flow-node-title { color: var(--white); }
  .flow-node-sub { font-size: 11px; color: rgba(255,255,255,0.35); line-height: 1.4; }
  .flow-arrow { font-size: 18px; color: rgba(255,255,255,0.2); padding: 0 8px; }

  .schema-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 16px; margin-top: 8px; }
  .schema-card { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 24px 22px; transition: border-color 0.25s; }
  .schema-card:hover { border-color: rgba(95,204,184,0.35); }
  .schema-name { font-size: 13px; font-weight: 600; color: var(--mint); margin-bottom: 12px; }
  .schema-fields { display: flex; flex-direction: column; gap: 6px; }
  .schema-field { font-size: 12px; color: rgba(255,255,255,0.4); display: flex; justify-content: space-between; padding-bottom: 6px; border-bottom: 1px solid rgba(255,255,255,0.05); }
  .schema-field:last-child { border-bottom: none; padding-bottom: 0; }
  .schema-field-name { color: rgba(255,255,255,0.7); font-weight: 400; }
  .schema-field-type { color: rgba(95,204,184,0.6); font-size: 11px; }

  .arch-callout { background: rgba(95,204,184,0.08); border: 1px solid rgba(95,204,184,0.2); border-radius: 14px; padding: 24px 28px; margin-top: 32px; display: flex; gap: 16px; align-items: flex-start; }
  .arch-callout-icon { font-size: 22px; flex-shrink: 0; }
  .arch-callout-title { font-size: 13px; font-weight: 600; color: var(--mint); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
  .arch-callout-body { font-size: 14px; color: rgba(255,255,255,0.5); font-weight: 300; line-height: 1.65; }
  .inline-code { background:rgba(255,255,255,0.1); padding:2px 6px; border-radius:4px; font-size:12px; font-family: monospace; }

  .rc-section { background: var(--beige); padding: 100px 0; }
  .rc-inner { max-width: 1100px; margin: 0 auto; padding: 0 80px; }
  .rc-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  .rc-card { background: var(--white); border-radius: 18px; padding: 36px 32px; border: 1px solid var(--beige-dark); transition: border-color 0.25s; }
  .rc-card:hover { border-color: var(--mint); }
  .rc-card.full { grid-column: span 2; }
  .rc-card-tag { font-size: 10px; font-weight: 600; letter-spacing: 0.2em; text-transform: uppercase; color: var(--mint-dark); margin-bottom: 14px; display: block; }
  .rc-card h4 { font-family: 'Playfair Display', serif; font-size: 22px; color: var(--ink); margin-bottom: 14px; line-height: 1.2; }
  .rc-card p { font-size: 14px; font-weight: 300; color: var(--ink-soft); line-height: 1.75; }

  .rc-flow { display: flex; flex-direction: column; gap: 0; margin-top: 16px; }
  .rc-step { display: flex; gap: 16px; align-items: flex-start; padding-bottom: 20px; position: relative; }
  .rc-step:not(:last-child)::before { content: ''; position: absolute; left: 14px; top: 30px; bottom: 0; width: 1px; background: var(--beige-dark); }
  .rc-step-num { width: 28px; height: 28px; border-radius: 50%; background: var(--mint-light); border: 1px solid var(--mint); display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 600; color: var(--mint-dark); flex-shrink: 0; margin-top: 2px; }
  .rc-step-title { font-size: 14px; font-weight: 600; color: var(--ink); margin-bottom: 4px; }
  .rc-step-body { font-size: 13px; font-weight: 300; color: var(--ink-soft); line-height: 1.6; }

  .bug-list { display: flex; flex-direction: column; gap: 16px; margin-top: 16px; }
  .bug-item { background: var(--beige); border-radius: 12px; padding: 20px 22px; border-left: 3px solid #ef4444; }
  .bug-title { font-size: 13px; font-weight: 600; color: #b91c1c; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 6px; }
  .bug-body { font-size: 13px; font-weight: 300; color: var(--ink-soft); line-height: 1.65; margin-bottom: 8px; }
  .bug-fix { font-size: 12px; font-weight: 500; color: var(--mint-dark); display: flex; align-items: center; gap: 6px; }
  .bug-fix::before { content: '‚úì'; font-weight: 700; }

  .insight-box { background: var(--ink); border-radius: 18px; padding: 40px; margin-top: 20px; display: flex; gap: 24px; align-items: flex-start; grid-column: span 2; }
  .insight-box-icon { font-size: 32px; flex-shrink: 0; }
  .insight-box-title { font-size: 13px; font-weight: 600; color: var(--mint); text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 10px; }
  .insight-box-body { font-size: 15px; font-weight: 300; color: rgba(255,255,255,0.6); line-height: 1.75; }
  .insight-box-body strong { color: var(--white); font-weight: 500; }

  footer { background: var(--ink); padding: 60px 80px; text-align: center; }
  .footer-turtle { font-size: 40px; display: block; margin-bottom: 14px; }
  .footer-title { font-family: 'Playfair Display', serif; font-size: 22px; color: var(--white); margin-bottom: 8px; }
  .footer-sub { font-size: 12px; color: rgba(255,255,255,0.25); letter-spacing: 0.12em; text-transform: uppercase; margin-bottom: 24px; }
  .footer-stack { font-size: 13px; color: rgba(255,255,255,0.2); }
  .footer-stack span { color: var(--mint); }

  /* ‚îÄ‚îÄ MERMAID ‚îÄ‚îÄ */
  .mermaid-wrap {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    padding: 48px 32px;
    margin: 32px 0;
    overflow-x: auto;
  }
  .mermaid-wrap .mermaid {
    display: flex;
    justify-content: center;
  }
  .mermaid-wrap svg {
    width: 100%;
    max-width: 100%;
    height: auto;
  }

  .fade-up { opacity: 0; transform: translateY(24px); transition: opacity 0.65s ease, transform 0.65s ease; }
  .fade-up.visible { opacity: 1; transform: translateY(0); }

  @media (max-width: 900px) {
    .hero, .section, .arch-inner, .rc-inner { padding-left: 32px; padding-right: 32px; }
    .nav-inner { padding: 0 32px; }
    footer { padding: 48px 32px; }
    .stack-grid, .schema-grid { grid-template-columns: 1fr 1fr; }
    .why-grid, .rc-grid { grid-template-columns: 1fr; }
    .rc-card.full, .insight-box { grid-column: span 1; }
    .hero-inner { grid-template-columns: 1fr; }
    .hero-turtle { display: none; }
  }
  @media (max-width: 600px) {
    .stack-grid, .schema-grid { grid-template-columns: 1fr; }
    .hero-title { font-size: 36px; }
  }
</style>
</head>
<body>

<section class="hero">
  <div class="hero-inner">
    <div>
      <div class="hero-eyebrow">Technical Documentation ¬∑ RevenueCat Shipyard 2026</div>
      <h1 class="hero-title">Taro ‚Äî <span>Van Life</span><br>Community</h1>
      <p class="hero-desc">Architecture reference and implementation notes for the Taro van life community app. Written to be transparent about what's built, how it's wired, and the real decisions made along the way.</p>
      <div class="hero-pills">
        <span class="pill">React Native + Expo</span>
        <span class="pill">Supabase Backend</span>
        <span class="pill">RevenueCat Subscriptions</span>
        <span class="pill">PostgreSQL + RLS</span>
      </div>
    </div>
    <div class="hero-turtle"><img src="assets/taro.png" alt="Taro" style="width: 300px; height: 300px;"></div>
  </div>
</section>

<nav class="nav-band">
  <div class="nav-inner">
    <a href="#stack" class="nav-link">01 ‚Äî Tech Stack</a>
    <a href="#architecture" class="nav-link">02 ‚Äî Architecture</a>
    <a href="#revenuecat" class="nav-link">03 ‚Äî RevenueCat</a>
  </div>
</nav>

<!-- 01 TECH STACK -->
<section class="section" id="stack">
  <div class="section-label">01 ‚Äî Tech Stack</div>
  <h2 class="section-title">What Taro is<br><em>built with</em></h2>

  <div class="stack-grid fade-up">
    <div class="stack-card">
      <div class="stack-label">Client</div>
      <div class="stack-items">
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">React Native</span><span class="stack-note">cross-platform</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">TypeScript</span><span class="stack-note">type safety</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Expo + Expo Go</span><span class="stack-note">live device testing</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Expo Router</span><span class="stack-note">file-based nav</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">React Navigation</span><span class="stack-note">stack + tabs</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Expo Location</span><span class="stack-note">foreground only</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Expo Image Picker</span><span class="stack-note">photo uploads</span></div>
      </div>
    </div>
    <div class="stack-card">
      <div class="stack-label">Backend</div>
      <div class="stack-items">
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Supabase</span><span class="stack-note">PostgreSQL BaaS</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Supabase Auth</span><span class="stack-note">email + password</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Supabase Realtime</span><span class="stack-note">live messages</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Supabase Storage</span><span class="stack-note">profile photos</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Row Level Security</span><span class="stack-note">per-row policies</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">pgcrypto</span><span class="stack-note">password hashing</span></div>
      </div>
    </div>
    <div class="stack-card">
      <div class="stack-label">Services</div>
      <div class="stack-items">
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">RevenueCat</span><span class="stack-note">subscriptions</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Google Maps API</span><span class="stack-note">activity map</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">Expo EAS Build</span><span class="stack-note">cloud builds</span></div>
        <div class="stack-item"><div class="stack-dot"></div><span class="stack-name">TestFlight</span><span class="stack-note">beta distribution</span></div>
      </div>
    </div>
  </div>
</section>

<!-- 02 ARCHITECTURE -->
<section class="arch-section" id="architecture">
  <div class="arch-inner">
    <div class="section-label">02 ‚Äî Architecture</div>
    <h2 class="section-title">How the system<br><em>is structured</em></h2>
    <p class="section-intro">Standard React Native client over a Supabase BaaS backend, with RevenueCat as an independent service layer for subscription state. Business logic lives in the client ‚Äî Supabase handles persistence, auth, and realtime.</p>

    <div class="mermaid-wrap fade-up">
      <div class="mermaid">
graph LR
    subgraph Client ["üì± React Native Client"]
        RN[App Entry\nApp.tsx]
        NAV[Navigator\nStack + Tabs]
        SCREENS[Screens\nHome ¬∑ Match ¬∑ Map\nMessages ¬∑ Builders]
        SERVICES[Services\nauth ¬∑ matching\nchat ¬∑ demoMode]
    end
    subgraph SB ["üóÑÔ∏è Supabase"]
        AUTH[Auth]
        DB[(PostgreSQL\nprofiles ¬∑ trips\nmatches ¬∑ messages)]
        RT[Realtime\nmessages]
        STORE[Storage\nphotos]
        RLS[Row Level\nSecurity]
    end
    subgraph RC ["üí≥ RevenueCat"]
        RC_SDK[SDK\ninitialize at root]
        RC_ENT[Entitlements\npremium check]
        RC_PAY[Paywall UI]
    end
    RN --> NAV --> SCREENS --> SERVICES
    SERVICES --> AUTH
    SERVICES --> DB
    SERVICES --> RT
    SERVICES --> STORE
    DB --> RLS
    SCREENS --> RC_SDK --> RC_ENT
    RC_ENT -->|locked| RC_PAY
      </div>
    </div>

    <h3 class="sub">Authentication & onboarding gate</h3>
    <p class="body">On launch, we restore the Supabase session from local storage ‚Äî returning users go straight into the app. New users complete 14 onboarding screens to collect profile, preferences, and location permission.</p>

    <div class="arch-callout fade-up">
      <div class="arch-callout-icon">‚ö†Ô∏è</div>
      <div>
        <div class="arch-callout-title">Key constraint ‚Äî profile row pre-creation</div>
        <div class="arch-callout-body">Supabase fires an <span class="inline-code">on auth.users insert</span> trigger synchronously on signup, creating an empty profiles row. All onboarding writes must use UPDATE ‚Äî INSERT will throw a primary key conflict every time.</div>
      </div>
    </div>

    <h3 class="sub">Matching algorithm</h3>
    <p class="body">Taro's core differentiator is trip-based matching ‚Äî users are surfaced based on destination overlap, not just proximity. If trip-based matches are fewer than 5, the algorithm fills from a general pool so users and judges never see an empty feed.</p>

    <h3 class="sub">Security model</h3>
    <p class="body">All public tables have RLS enabled. The client uses only the anon key, which is limited by RLS. The service role key never ships to the client. Profile photos live in a public bucket for instant loading in match cards ‚Äî uploads are restricted to each user's own folder path.</p>
  </div>
</section>

<!-- 03 REVENUECAT -->
<section class="rc-section" id="revenuecat">
  <div class="rc-inner">
    <div class="section-label">03 ‚Äî RevenueCat</div>
    <h2 class="section-title">Subscription<br><em>implementation</em></h2>
    <p class="section-intro">RevenueCat manages all subscription state. The paywall gates matching and direct messaging. The builder marketplace runs a two-sided model ‚Äî builders pay to list, subscribers pay to contact them.</p>

    <div class="rc-grid fade-up">

      <div class="rc-card">
        <span class="rc-card-tag">Initialization</span>
        <h4>SDK Setup & Timing</h4>
        <p>Configure RevenueCat at app start before any gated screen loads. Use Expo env keys and call <code style="background:var(--mint-light);color:var(--mint-dark);padding:2px 6px;border-radius:4px;font-size:12px;">logIn(supabaseUserId)</code> to tie purchases to the account ‚Äî this ensures restores work correctly across reinstalls and device transfers.</p>
      </div>

      <div class="rc-card">
        <span class="rc-card-tag">CustomerInfo Cache</span>
        <h4>Subscription State Management</h4>
        <p>A custom hook exposes <code style="background:var(--mint-light);color:var(--mint-dark);padding:2px 6px;border-radius:4px;font-size:12px;">isPremium</code> and a <code style="background:var(--mint-light);color:var(--mint-dark);padding:2px 6px;border-radius:4px;font-size:12px;">refresh()</code> function. CustomerInfo is re-fetched on every foreground transition via an AppState listener to prevent stale cache from showing the paywall to active subscribers.</p>
      </div>


      <div class="rc-card">
        <span class="rc-card-tag">Restore Purchases</span>
        <h4>Cross-device & reinstall handling</h4>
        <p>The paywall includes a Restore Purchases option that calls RevenueCat's restore API. On success, CustomerInfo updates and the entitlement check runs again automatically. A clear message is shown if no active subscription is found ‚Äî no silent failure. Handles reinstalls, new devices, and App Store family sharing.</p>
      </div>

      <div class="rc-card">
        <span class="rc-card-tag">Paywall Gates</span>
        <h4>What requires subscription</h4>
        <p><strong style="color:var(--ink)">Gated:</strong> Match tab and initiating any direct message, including messaging builders.<br><br><strong style="color:var(--ink)">Free:</strong> Map, Home feed, trending destinations, and browsing the builder catalog.<br><br>The paywall renders in-context so users understand exactly what they're unlocking.</p>
      </div>

    

    </div>
  </div>
</section>

<footer>
  <span class="footer-turtle"><img src="assets/taro.png" alt="Taro" style="width: 40px; height: 40px;"></span>
  <div class="footer-title">Taro ‚Äî Van Life Community</div>
  <div class="footer-sub">Technical Documentation ¬∑ RevenueCat Shipyard 2026</div>
  <div class="footer-stack">Built with <span>React Native ¬∑ Supabase ¬∑ RevenueCat ¬∑ Expo</span></div>
</footer>

<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'neutral',
    themeVariables: {
      primaryColor: '#5FCCB8',
      primaryTextColor: '#1A1A1A',
      primaryBorderColor: '#3aaa96',
      lineColor: '#5FCCB8',
      secondaryColor: '#F8F7F4',
      tertiaryColor: '#e8f9f6',
      fontSize: '15px',
      messageTextColor: '#ffffff',
      actorTextColor: '#1A1A1A',
      actorBkg: '#e8f9f6',
      actorBorder: '#3aaa96',
      labelBoxBkgColor: '#1A1A1A',
      labelTextColor: '#ffffff',
      loopTextColor: '#ffffff',
      noteBkgColor: '#3aaa96',
      noteTextColor: '#ffffff',
    },
    flowchart: { curve: 'basis', padding: 20, nodeSpacing: 50, rankSpacing: 60 },
    sequence: { actorMargin: 80, width: 160, height: 60, messageMargin: 35 },
  });

  const obs = new IntersectionObserver(e => { e.forEach(x => { if (x.isIntersecting) x.target.classList.add('visible'); }); }, { threshold: 0.1 });
  document.querySelectorAll('.fade-up').forEach(el => obs.observe(el));

  const sections = document.querySelectorAll('[id]');
  const links = document.querySelectorAll('.nav-link');
  const io = new IntersectionObserver(e => { e.forEach(x => { if (x.isIntersecting) { links.forEach(l => l.classList.remove('active')); const a = document.querySelector(`.nav-link[href="#${x.target.id}"]`); if (a) a.classList.add('active'); } }); }, { threshold: 0.4, rootMargin: '-80px 0px -50% 0px' });
  sections.forEach(s => io.observe(s));
</script>
</body>
</html>
